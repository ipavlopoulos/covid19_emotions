<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<!--div id="positive_div" style="width:600px;height:250px;"></div-->
<!--div id="negative_div" style="width:600px;height:250px;"></div-->
<!--script>
    var pos_data = [{y: [0.1, 0.2, 1, 4, 10], x: ['2020-07-01', '2020-07-15','2020-08-1', '2020-08-15'], line: {color: 'green'}}]
    var neg_data = [{y: [5, 4, 2, 0.5, 0.01], x: ['2020-07-01', '2020-07-15','2020-08-1', '2020-08-15'], line: {color: 'red'}}]
	Plotly.newPlot(document.getElementById('positive_div'), pos_data, {title: 'Positive Sentiment',} );
	Plotly.newPlot(document.getElementById('negative_div'), neg_data, {title: 'Negative Sentiment',} );

</script-->

<!--script>
    Plotly.d3.csv('https://raw.githubusercontent.com/apodagrosi/datasets/master/PlotlyTest_Summary_SalesByDealerByYear.csv', (err, rows) => {
        var data = years.map(y => {
            var d = rows.filter(r => r.year === y)

            return {
                type: 'bar',
                name: y,
                x: d.map(r => r.dealer),
                y: d.map(r => r.sales)
            }
        })
    }
</script-->

<head>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
<div id="myDiv" style="width: 480px; height: 400px;"><!-- Plotly chart will be drawn inside this DIV --></div>
<script>
    function makeplot() {
        Plotly.d3.csv("https://raw.githubusercontent.com/ipavlopoulos/emotions/master/docs/DATA/2020-07-08.csv", function (data) {
            processData(data)
        });
    };

    function processData(allRows) {

        console.log(allRows);
        var x = [], y = [], standard_deviation = [];

        for (var i = 0; i < allRows.length; i++) {
            row = allRows[i];
            x.push(row['day']);
            y.push(row['sentiment']);
        }
        console.log('X', x, 'Y', y, 'SD', standard_deviation);
        makePlotly(x, y, standard_deviation);
    }

    function makePlotly(x, y, standard_deviation) {
        var plotDiv = document.getElementById("plot");
        var traces = [{
            x: x,
            y: y
        }];

        Plotly.newPlot('myDiv', traces,
            {title: 'Sentiment time series, in USA, yesterday.'});
    };
    makeplot();
</script>
</body>
